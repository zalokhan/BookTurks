language: python
cache: pip
python:
- '3.5'

before_install:
  - export DJANGO_SETTINGS_MODULE=mysite.settings
  - "/sbin/start-stop-daemon --start --quiet --pidfile /tmp/custom_xvfb_99.pid --make-pidfile --background --exec /usr/bin/Xvfb -- :99 -ac -screen 0 1280x1024x16"

install:
- pip install -r requirements.txt

services:
- postgresql

before_script:
  - psql -c "CREATE DATABASE travisdb;" -U postgres
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start

addons:
  sauce_connect: true

script:
- coverage run --source=service manage.py test service.tests

after_success:
- coveralls

deploy:
  provider: heroku
  api_key:
    secure: mpNvO7V11HI4a2UOCrav9YfK0sn68owkIghR9+UDdAagsUmGvwJ1TIueITKNJxwwPXSwmaaHbbTZaaST/2TuZV/b8zSs6ffGOYoMiUlObYhfrMUcsdsqMlOSMOph77x20w1LJ+HnUqvj4dxRHIr/eXWlh3uPlzVeoPnj/63YKwoUKIWVHaLMltNHu5aK0XG9/qx+3EAwtTV5g5lYhbQRdmPi8rHu5Ye9xAwwewGPjVm/FK1uPm2Zf//0jRlcCwezvgCT/3r4Unq+pE4tXtJknxB4zJZlKAQAzp78NrWwfE0vks6QuoaSPQJsGNde+GnGE4ZcpFfDAvFmyaq82rloZcEsIvJ3ITzeUe320PWGE6IVu5zuP2PT732PpkmQ1/wVK2YvPICSf5BOWRduGrJEycDrli/y4jPLBzP2xU9ya99se9F+nRcM/nerma3E6QBWkCeQ2tqyYfATTEg70NHyl3Iz0IKlT0ds1CW59lEMelpnnhn44v1CV1Bca5o0sTje8o/7Vgt7y8zHBxFtk5T8YZe/1U9hAh/lCx5GhrtQpRhPvz8Es2obSyP99STh9xbDfpEDt6kmU2ON+GsdNR2fL1t1TLahyWo4qd/NRZNnpaMMwubHLUtCCZGmu3dz452FTkZMabi/EQ9lsWYK0RLFnvOXq+/Yri//IYo+tm5qjVY=
  app:
    dev: devbookturks
    zdev: devbookturks
    master: bookturks
  on:
    repo: zalokhan/BookTurks

env:
  global:
  # DJANGO
  - secure: TY54FcUcTj0cZ0e6IEmdMzFuEOIjGqdyC7YFSP/MNYwcOjzex9KofIy8hUquBowYl64SNCs7CHSh8XSGRFNDobdfDjThFEJNKNIryzZ0Z8VMacBGgqmPdJ/rtxKYyyKi1gLYmqtPD9KVxB364e+SPIe7QrgppNyRpO0x/aa2RXieVdHl9eX35CLuWd8wAKWT/pAyKdTTQOQ9C5TTzH5Agw3ruiQh++8TNt6dTuUx5oCU/rUKRq6PGp90b/7ZhkLdBx9BaQvQX1MrA5dFg2oKfFWaWf6RzSH2LHhWk9h3lQvwi2NtLyk4xW3jFB62ULj5Ns7mQybRf27J4nw33lyQjJo2w05AQcS3G437VF1ueTrA7z/dBFCifI0Lli0PBCpiDWPRhrzhGm7GL1jesBQc2V/hCwZG8sQeoKc3oJeHkkEYl9u5MUHzjsbsWNYxWc4veWP7mL+9GkhVUWZvXgrEVCr3iEfjzl+i1QFvYdYB/Dq51P08Lf3UB6bi5YoZf3YsEDYqtGdde33+r5PLywIQOIfH9G/vXtFbcPITYyvvmHFaDCkbzAXb6A+XxFXvLQs8+mBvVRquGT1mM2gfMlkatx3+0yr3ramEkIyZ9vtVeN0uA7NqL4ORsV9S1Apfw8zvBqdM4aourMimBffXZ9oY5RMRzh+SwN0QSb0ofpbGTRs=
  # SOCIAL
  # FB
  - secure: Ulq6genUdKpDcLd+iKcoxuewFXwgtXHAP1BCBM6awCYpRbmtwt1qAHXlOaw1fAOD7BWrDD2GDTGVR14ZNCMWeNBoNE0GG7wLUIGpdvx4VBBPrgkbNw8cECuRFdcydhqH0+BSvsLeG0Wvr94KXDwIV92NKx+Pv71oiz5toFSvrgtc1a038xCrEaHvvhewC19Wn1ZxiXjDfAsNTl5m0BdMFXlCU8dH9XaozZsFIOXEoA84HQzDPSDkC9ndxPrBkMzT4Q31a6ODchXw4HyVfmwZaX9d7nSoBFP1rroNoFiNpueNoeiCXEXrgn4i5X5qSuwf5r6U8g/EczZF6n8EaoEeFHfsKo7Ya5LlGN+lRymLAFkBo88bqI02cmzS7KoblGMElb7I7Gj2edarTAcW5wfn6xnIFZ8LaYuA9btv3Kpx7tyPyhNuYtwEYJVVvSjEvk8LFmyRO6pf4SCc4XZFPuAbpWpzdnH7v6KxBLhnymV5uXRcl6AGxX4w8TbQeJDPzcWqBs75bOU70WIKLTmXX5rKFO7Gj4mqqGwEPpKPmmqnhlqAHnd26I/FJySZQrsfkza1OhAytsKIKuTJ170NERRNrsASpV57cVLiR8VNotcxAaiPn0YEt/OcJ9SmBME9t+jwciaybE936mKz9pHtaTwyweQFfLnCl0RcB5ub4fAlHJE=
  - secure: wlrpltpDOLliO0sL6JUjZObiGVl3y+4Jk8v9cg68sXUWTwDXDO6n2YWhcv/gxPv/h9ls0ISqG3koWu+ORIXe+30o4oqFaVmpbFoY8xnl6nzZ/R5RuY6DLi4htePGEPpswAtbpLcy7xDtQweWJY/3MAzBWmhTFrr61pvtQ2b/+1fwsOi3lwRc8KoIfX5tvtF8gmPCve9mEMSL3jOcbvgimUs/CbD9MO3+z+9kB1V9Jnwq9gOynwBfD+F2L5Al9WZzjzQTm0iQi8hyJLmh/P6wEO8pBe2vvs6HduB5fnqhRho45/vBUKxy8bkNzpnAXAVMRSI/liorcaJQQQN9BOGQlfnz9SZv9K5DPqRZBi2OBY/AFTsh8L/A7QsPqMncZmglfTlLIiEU8cfm+zIv2tA4h28OSGWlH5MGhhP6Kj7a7GO9lzUEeMqUvy8PBmuI4NPP2Bx04zm6L0yoNQXk62egurqHqooIuNqrxtAxjMXi8/2IoPrTPtutKb7Yvv907PG127o7DhRvTT7T4ihr8qfJUC9sQn2nOyOE0ykC3KvS0Chd7DU3CwGRkIP/Rro+pJE2+7pM3Gvhr0WU3Sp63ldLh2kzDrGh7YIrhDz6e/zq5W1f5UXZ8ZRpfGUOjoAREmQWzUztqDzDP6W3PFy2IQbty6PiPlZuIZU2Pm9dtYEwO30=
  # GOOGLE
  - secure: ixSvQdd8K6ku5DePzB26UhjjKXNpu12or50HzL7C7qPeYHvOd6XT0rKiBgMcqovCPp/u1Cu8uYYqECogrnqN/1LtGAtbZoDsnXjol4TpF/SMP6KX0qqPwjLfbmJd5Y5LaJfEVf78rWo2kOPiXMch7X/ZGBH4AtSksUrJS0Xf3OIXiMWoo6Xw2Uh2KfCNFqoa2OQfUlMEobRcO/ysvnekyFqO5jXAmF0ORCk9JIQhR537QI70jS7oQbV2XKBHVKq3iIL9JAN2O54PQjE6noLYoqpRmXFC+7IpkPQQXsNC+xDSzj0gBddqrULxwJkcc9ifibO1Swo//rXeHjy5KYEPxRz/Cl13L166b/VXOZY4xNDxReO7VIT+S1bPY3fvL5R5A838A1GpAzQl7u/5UtRdTNz2KS94aHfWrIh1QN3X98GDiVUX+/hn/RtRuO3B1KKf3zLhf64ML1f6MUq1AemvRsHUwL1Snn6yG1pBtFkwG3vuTNi1jHsG0vH1uhl5HAvp4k/WKnHJrax9U6lQ6nQMSVwriY2IRRHBetoQIv4TF4b6R/menZjbR88K8uamPuVxurUm6SLRFlKDIzsDPWR4YFo7qzLLwk0cCSxZmBUSwh86hFh7athaOot1+Tqk51AGjFUjdJUisOMvIUUUIQLS/RMCAK6u9ks+ec6/7//qLIs=
  - secure: xqmVEiToGAqFSFw/LFn7PeEU0v10azqjGQifsOomp5CTrAsVs0S52P918jeLGOoNlnmejzX6y6x8ioWo/G8I93rw4Ti6tYLoI/D1VUAFnO6CwExrikDw8ihrA0tInxFulqhozKDkU3flyL8yEJaoLEB64z+dUSen7WNn2kiiS+ywgGmAjCxikr5jJHP+kOWQj95idgT8GKYyEokI2yt66gpIAtUsFgarBjYN/IvnNRBT7U7HQZUX3vyG6roKfeu3Y2lvTxZSOd82/noSMJ9ULdY6DnPHi8l1lrrte/n6POE7R/IEoBr8ZymDUDPKBGhkk8+CM5prHX/iQ60vN4FySdaHEyLMm6y1z98jfwbjbQcCuGOZmGGt6lw0Z75WHuzooChyLaHFBaTTFSft648imS1XVedY4eGOho4tVS+PZEuE/kCWo8MkabW0Cp2+ozOAgkIWfRO6hfkMIVCK1qHEh70fDZwR1+G28AbGTsxbIbaFff6IdNzV2kGgCtcL86a082ZY4QiaKtuQpbog65uYTQaSClPP0tXb3zj8BPON3DOuN27M2a7kthkaoi4natUrZjqapYkHSWU2V7BTG44n3lRIWL1XkzKCoe3HdCBRHJHj0aExdiD8URg+GkD+jvGG3csFOvZIq6N2pb6oZ2XdAb0DbtH6boWSknkJ5PuQZi8=
  # DROPBOX ACCESS TOKEN
  - secure: U7Ze5fzd/oz4Bmw0idfDjC8Ybbw9f26re9hnP8r39NOnZhd0SZM10D+pERBpZRMmPb3ql9S4V8RpmVp9+tpId64cavBO5CSaazaGktmskxjzpkMWPwVlxpyA4jsIkhhS1AENeS7keC1LSVatYmgPG6nF9fIFKHdnG5cOYaTFGk+mZQZ7oMP9++NpEKxmwbFR4SWbgtywC7HPRqtSuyfi8X27qPGiGydLXSdmMbNOIwiN2acpO2Hu6PF6fXWYGD5ZysBxjqsG2b/ggaa/Pqt8BAhzOGyxVWy93zIMBlOOBcsUIi5lwLn2mxwxRwEOlUax2atUOBB3yC00WEmF6TOijs9ZBzYAchemy5Lht2RK5KnFGcv0MwbEZyxxdPlFlxPtLW1QGoC0llP/3uo26QKhds7xtpmfFKay0dVwV4hpcwPeUU4FDNsekUfW6vTcQYex7XH63xSd4zbSIVrzPTsO8dxIr2dnBgetyA4AaeRHaKlTHOkBQFP8fUsJMtiFxAHZnkTAS9/Sd7xZpPQJ/BMwrmPwCpWbpwX5T+Ou8jHLWOP6FR6VItKNptbPtDxQRIBL5tVw7LQfJYUd1XzjaIzXWaxCbzV9ENSqVDyswqXsKQPoJ0gUGOivi7yQ+UN+SlOHS44og4cfqkRHi45eL5ys+ivt6T6jIrrtekQFO+doyT8=
  # SAUCE LABS
  - secure: xGbXodHYx0feKHJXyY6QqUdysVvEEAimozYunyDxomgKCBzk30oYFyyJBpgMuqAz37h9akZZL8bXwUrQvcxwhWblGt64dkpmXBV3mFZniUrjgo9fV3iUwgn+Wo+VtkWduT5YaW7C9QJ/9mdNTe8ibtSeE9N8pJiR21P1DumbmsJKq9YzkNgHiiOLDu5j5lDnOMzjvfqdi1H8buwLfB0n23BH/m6tPRR0+eXb94bp98qJr2cyOqqPdy909Z2Yax+lLdSj//YFGWEUEGIwhm9I6ALXEpIIe+43xPQI3g3wyGaO4/cxVOxODbbr34Z3BVP7nEY4gEtUdQrcM2Mjka78wzJLvMtImoIIfVHhbkFgd6prOe9TcvAVDW0t0StRWoJGCF5wIAJzwhnPqJ1MouaoFDoSW1lVwi2mnUAnpdO1r9u5bd8+wmYUqISbW6m3iCqlAIGNJF0R1OjPLKV7dJ4nAuKE1pDq4qGCtHOU25bksVfz7rPs800A22DMrHSWxj2BDsVLL9DapJgPivq3UX99LUJ+lCoZieKFKFLWEW39mfk/Bw3IlN2FZiSTL23SSiAdOfZwqkbbadGv6d3Yvrjm1d4XuvFtrUFFO5nWFkXTaxM/Pu6OQCgpKCzMbdFv4RBzRcFwJDLNR2UODOEcufaE+I29a9L5OnoLlywYDwoMtBY=
  - secure: Dq14Y6DpjkctLCe1dQn08G1/7sFDPoxwATp++c9FFrMpiZ3nCcUBeQGKzJq79e81mC3PMaHzFGjeDHSVScLZPi/4vP24yDvYmXkNhaPKtbZGBIprRLUZWofdxY8q0xPqGhBMyNbwqKE0wb+WvW6nqOdhno1KbbhxBF2YEqE9SQfev1BCuYgMkc+E0nSvybNye6CuXJfy1n5c1mwj2mL5rsqNhLhKNRyOQ9SJhA++L37ZbYV7p75FnChPrygNN7U6C5b2N4WGHooiUlJvGjGgTfnRIVtE8i80peDeVUOlirAMASyEXwObqN8pynw3Ni0y7Fp78/NnQPzXa1lb7LMhow7HFNEfDnHI/VoePH8IlU5Cs2CWkF3aOzT6pHsjHIB4EMiGhHXj/ejcV2qMeAal0mwupsQtKkCq/EEiBpX1TsZElMM+/K+IpLycKE+iMEoIThOzZOozSbEpX2xnpyYUQC/ug1ZkCB9rOcKFD965MRr5jUOGWBJizz0x94AFxUGZy59J4UKpMuFbLxVcD1DdNeGAKrvoWZ8/rTeMAlij+OISUHiqD9YVAf0reTCuqcNn2VTGPTjQaP702h4SA8S//6aVEXN0P80lmajAcGBGfERpPt+olJY8tihq7aRsspB/My3wsWo5x//kSR22OKTtHB4AzsL0A9q+If9LC/OS5HI=
